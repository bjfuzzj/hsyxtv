(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5abeca0"],{6724:function(e,t,n){"use strict";n("8d41");var a="@@wavesContext";function i(e,t){function n(n){var a=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),r=i.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",r.appendChild(l)),i.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=n:e[a]={removeHandle:n},n}var r={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},s=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(s)),r.install=s;t["a"]=r},"709b":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var a=n("b775");function i(e){return Object(a["a"])({url:"/banner/index",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/banner/save",method:"post",params:e})}function s(e){return Object(a["a"])({url:"/banner/detail",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/banner/offline",method:"post",params:e})}function c(e){return Object(a["a"])({url:"/banner/online",method:"post",params:e})}},"8d41":function(e,t,n){},"97af":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"bannerFrom",staticClass:"box",attrs:{model:e.banner,rules:e.rules,"label-width":"150px"}},[n("div",{staticClass:"box-title"},[e._v("基本信息")]),e._v(" "),n("div",{staticClass:"box-center"},[n("el-form-item",{attrs:{label:"类型",prop:"type"}},[n("el-input",{staticClass:"w500",attrs:{type:"text",placeholder:"请协商确定名字后修改"},model:{value:e.banner.type,callback:function(t){e.$set(e.banner,"type",t)},expression:"banner.type"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"内容图片",prop:"content"}},[e.banner.content?n("div",{staticClass:"el-upload-list--picture-card"},[n("div",{staticClass:"el-upload-list__item is-success"},[n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.banner.content,alt:""}}),e._v(" "),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{staticClass:"el-icon-upload-success el-icon-check"})]),e._v(" "),n("span",{staticClass:"el-upload-list__item-actions"},[n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.imagePreview(e.banner.content)}}},[n("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){e.banner.content=""}}},[n("i",{staticClass:"el-icon-delete"})])])])]):n("el-upload",{attrs:{action:"/upload_image","list-type":"picture-card",accept:"image/png, image/gif, image/jpeg","show-file-list":!1,"on-success":e.uploadContentImageSuccess,"on-error":e.uploadImageError}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("div",{staticClass:"plusText"},[e._v("建议尺寸：750*320像素")])],1),e._v(" "),n("el-form-item",{attrs:{prop:"clicktype","label-width":"20px"}},[n("el-radio-group",{staticStyle:{display:"flex"},model:{value:e.banner.clicktype,callback:function(t){e.$set(e.banner,"clicktype",t)},expression:"banner.clicktype"}},e._l(e.clikcTypes,(function(t,a){return n("el-radio",{key:"pro_"+a,staticClass:"pro-type",attrs:{label:t.value,border:""}},[n("div",{staticClass:"pro-type-item"},[n("span",[e._v(e._s(t.label))]),e._v(" "),n("span",{staticClass:"pro-type-tip"},[e._v(e._s(t.tip))])])])})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"点击地址",prop:"clickcontent"}},[n("el-input",{staticClass:"w500",attrs:{type:"text",placeholder:"请输入点击后跳转的地址"},model:{value:e.banner.clickcontent,callback:function(t){e.$set(e.banner,"clickcontent",t)},expression:"banner.clickcontent"}})],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisibleImg},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doSave()}}},[e._v("立即创建")])],1)],1)},i=[],r=(n("4057"),n("1bc7"),n("b3d7"),n("709b")),s=n("6724"),l={name:"BannerCreate",directives:{waves:s["a"]},data:function(){return{clikcTypes:[],dialogVisibleImg:!1,dialogImageUrl:"",banner:{type:"",content:"",clicktype:"",click_content:""},rules:{type:[{required:!0,message:"请输入banner名称",trigger:"blur"}],content:[{required:!0,message:"请上传banner图片",trigger:"blur"}],clickcontent:[{required:!0,message:"请选择跳转类型",trigger:"blur"}]}}},created:function(){this.$route.query&&this.$route.query.id&&(this.banner.id=this.$route.query.id),this.getData()},methods:{getData:function(){var e=this,t={};e.banner.id&&(t.id=e.banner.id),Object(r["a"])(t).then((function(t){t&&(t.banner&&(e.banner=t.banner),t.clicktype_options&&(e.clikcTypes=t.clicktype_options))}))},doSave:function(){var e=this,t=!0;e.$refs.bannerFrom.validate((function(n,a){n||(e.$message.error(Object.values(a)[0][0].message),t=!1)})),t&&Object(r["e"])(e.banner).then((function(t){e.$message.success("创建banner成功"),e.$router.push({path:"/banner/index"})}))},uploadImageError:function(){this.$message({type:"error",message:"上传图片失败!"})},formatFloat:function(e){var t=parseFloat(e);if(isNaN(t))return"";t=Math.round(100*t)/100;var n=t.toString(),a=n.indexOf(".");a<0&&(a=n.length,n+=".");while(n.length<=a+2)n+="0";return n},imagePreview:function(e){this.dialogImageUrl=e,this.dialogVisibleImg=!0},uploadContentImageSuccess:function(e,t,n){e.data.url||this.$message({type:"error",message:"上传图片失败!"}),this.banner.content=e.data.url}}},c=l,o=(n("ec5a"),n("c701")),u=Object(o["a"])(c,a,i,!1,null,"c0c8761a",null);t["default"]=u.exports},b3d7:function(e,t,n){var a=n("e99b"),i=n("d3ef")(!1);a(a.S,"Object",{values:function(e){return i(e)}})},d3ef:function(e,t,n){var a=n("26df"),i=n("93ca"),r=n("3471"),s=n("35d4").f;e.exports=function(e){return function(t){var n,l=r(t),c=i(l),o=c.length,u=0,d=[];while(o>u)n=c[u++],a&&!s.call(l,n)||d.push(e?[n,l[n]]:l[n]);return d}}},ec5a:function(e,t,n){"use strict";n("f516")},f516:function(e,t,n){}}]);