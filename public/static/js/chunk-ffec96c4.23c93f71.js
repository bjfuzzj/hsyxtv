(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffec96c4"],{"0f2b":function(e,t,a){"use strict";a("a1ee")},2227:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h2",[e._v("优惠券模板")]),e._v(" "),a("el-divider"),e._v(" "),a("el-form",{ref:"couponForm",attrs:{model:e.coupon_template}},[a("el-form-item",{attrs:{prod:"name",label:"优惠券名称"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.name,callback:function(t){e.$set(e.coupon_template,"name",t)},expression:"coupon_template.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠券类型"}},[a("el-radio-group",{on:{change:e.changeType},model:{value:e.coupon_template.type,callback:function(t){e.$set(e.coupon_template,"type",t)},expression:"coupon_template.type"}},[a("el-radio",{attrs:{label:1}},[e._v("直减")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("满减")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("折减")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推广类型"}},[a("el-radio-group",{model:{value:e.coupon_template.promote_type,callback:function(t){e.$set(e.coupon_template,"promote_type",t)},expression:"coupon_template.promote_type"}},[a("el-radio",{attrs:{label:1}},[e._v("全平台")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("指定商品")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品ID",prod:"product_ids"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.product_ids,callback:function(t){e.$set(e.coupon_template,"product_ids",t)},expression:"coupon_template.product_ids"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("指定的商品ID，多个商品逗号隔开")])],1),e._v(" "),a("el-form-item",{attrs:{label:e.cut_type_desc,prod:"cut_value"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.cut_value,callback:function(t){e.$set(e.coupon_template,"cut_value",t)},expression:"coupon_template.cut_value"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("减多少；直减和满减为金额，折减为折扣")])],1),e._v(" "),a("el-form-item",{attrs:{label:"消费多少金额",prod:"cost"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.cost,callback:function(t){e.$set(e.coupon_template,"cost",t)},expression:"coupon_template.cost"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("消费多少金额可以使用，用于满减类型")])],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠券数量",prod:"total"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.total,callback:function(t){e.$set(e.coupon_template,"total",t)},expression:"coupon_template.total"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"已领取优惠券数量",prod:"used_cnt"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.used_cnt,callback:function(t){e.$set(e.coupon_template,"used_cnt",t)},expression:"coupon_template.used_cnt"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"领取张数",prod:"person_limit_num"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.person_limit_num,callback:function(t){e.$set(e.coupon_template,"person_limit_num",t)},expression:"coupon_template.person_limit_num"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("每个人领取多少张")])],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期类型"}},[a("el-radio-group",{on:{change:e.changeValidType},model:{value:e.coupon_template.valid_type,callback:function(t){e.$set(e.coupon_template,"valid_type",t)},expression:"coupon_template.valid_type"}},[a("el-radio",{attrs:{label:1}},[e._v("限定日期有效")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("领取n天有效")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show_valid_day,expression:"show_valid_day"}],attrs:{label:"有效天数",prod:"valid_day"}},[a("el-input",{staticClass:"w200",model:{value:e.coupon_template.valid_day,callback:function(t){e.$set(e.coupon_template,"valid_day",t)},expression:"coupon_template.valid_day"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("优惠券有效期天数")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show_valid_time,expression:"show_valid_time"}],attrs:{label:"开始时间",prod:"valid_start_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00",format:"yyyy-M-d H:m:s","value-format":"yyyy-M-d H:m:s"},model:{value:e.coupon_template.valid_start_time,callback:function(t){e.$set(e.coupon_template,"valid_start_time",t)},expression:"coupon_template.valid_start_time"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("优惠券有效开始时间")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show_valid_time,expression:"show_valid_time"}],attrs:{label:"结束时间",prod:"valid_end_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00",format:"yyyy-M-d H:m:s","value-format":"yyyy-M-d H:m:s"},model:{value:e.coupon_template.valid_end_time,callback:function(t){e.$set(e.coupon_template,"valid_end_time",t)},expression:"coupon_template.valid_end_time"}}),e._v(" "),a("div",{staticClass:"plusText"},[e._v("优惠券有效结束时间")])],1),e._v(" "),e.statusOptions.length>0?a("el-form-item",{attrs:{label:"状态",prod:"status"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},model:{value:e.coupon_template.status,callback:function(t){e.$set(e.coupon_template,"status",t)},expression:"coupon_template.status"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"首页弹窗图",prop:"src"}},[e.coupon_template.src?a("div",{staticClass:"el-upload-list--picture-card"},[a("div",{staticClass:"el-upload-list__item is-success"},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.coupon_template.src,alt:""}}),e._v(" "),a("label",{staticClass:"el-upload-list__item-status-label"},[a("i",{staticClass:"el-icon-upload-success el-icon-check"})]),e._v(" "),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.imagePreview(e.coupon_template.src)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){e.coupon_template.src=""}}},[a("i",{staticClass:"el-icon-delete"})])])])]):a("el-upload",{attrs:{action:"/upload_image","list-type":"picture-card",accept:"image/png, image/gif, image/jpeg","show-file-list":!1,"on-success":e.uploadImageSuccess,"on-error":e.uploadImageError}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{staticClass:"plusText"},[e._v("建议尺寸：300*300像素")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否首页弹窗"}},[a("el-radio-group",{model:{value:e.coupon_template.is_show,callback:function(t){e.$set(e.coupon_template,"is_show",t)},expression:"coupon_template.is_show"}},[a("el-radio",{attrs:{label:1},model:{value:e.coupon_template.is_show,callback:function(t){e.$set(e.coupon_template,"is_show",t)},expression:"coupon_template.is_show"}},[e._v("首页弹窗")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.coupon_template.is_show,callback:function(t){e.$set(e.coupon_template,"is_show",t)},expression:"coupon_template.is_show"}},[e._v("不弹窗")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisibleImg},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.doSave}},[e._v("保 存")])],1)],1)},o=[],s=a("cbfe"),i=a("6724"),n={name:"CouponEdit",directives:{waves:i["a"]},data:function(){return{dialogVisibleImg:!1,dialogImageUrl:"",cut_type_desc:"折减金额",show_valid_day:!0,show_valid_time:!0,statusOptions:"",coupon_template:{name:"",type:1,promote_type:1,product_ids:"",cut_value:"0",cost:"0",total:0,person_limit_num:0,valid_type:1,valid_day:0,valid_start_time:"",valid_end_time:"",creator_name:"",id:0,src:"",status:1,is_show:0}}},created:function(){this.$route.params&&this.$route.params.id&&(this.coupon_template.id=this.$route.params.id),this.getData()},methods:{uploadImageSuccess:function(e,t,a){e.data.url||this.$message({type:"error",message:"上传图片失败!"}),this.coupon_template.src=e.data.url},uploadImageError:function(){this.$message({type:"error",message:"上传图片失败!"})},imagePreview:function(e){this.dialogImageUrl=e,this.dialogVisibleImg=!0},getData:function(){var e=this,t={id:e.coupon_template.id};e.coupon_template.id>0&&Object(s["b"])(t).then((function(t){t.coupon_template&&(e.coupon_template=t.coupon_template,e.statusOptions=t.statusOptions)})),2===e.coupon_template.valid_type?(e.show_valid_day=!0,e.show_valid_time=!1):(e.show_valid_day=!1,e.show_valid_time=!0)},doSave:function(){var e=this;Object(s["e"])(e.coupon_template).then((function(t){e.$message.success("保存成功"),e.getData()}))},changeType:function(e){this.cut_type_desc=1===e?"直减金额":2===e?"满减金额":"折扣率"},changeValidType:function(e){2===e?(this.show_valid_day=!0,this.show_valid_time=!1):(this.show_valid_day=!1,this.show_valid_time=!0)}}},c=n,p=(a("0f2b"),a("c701")),u=Object(p["a"])(c,l,o,!1,null,"56801908",null);t["default"]=u.exports},6724:function(e,t,a){"use strict";a("8d41");var l="@@wavesContext";function o(e,t){function a(a){var l=Object.assign({},t.value),o=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},l),s=o.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var i=s.getBoundingClientRect(),n=s.querySelector(".waves-ripple");switch(n?n.className="waves-ripple":(n=document.createElement("span"),n.className="waves-ripple",n.style.height=n.style.width=Math.max(i.width,i.height)+"px",s.appendChild(n)),o.type){case"center":n.style.top=i.height/2-n.offsetHeight/2+"px",n.style.left=i.width/2-n.offsetWidth/2+"px";break;default:n.style.top=(a.pageY-i.top-n.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",n.style.left=(a.pageX-i.left-n.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return n.style.backgroundColor=o.color,n.className="waves-ripple z-active",!1}}return e[l]?e[l].removeHandle=a:e[l]={removeHandle:a},a}var s={bind:function(e,t){e.addEventListener("click",o(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[l].removeHandle,!1),e.addEventListener("click",o(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[l].removeHandle,!1),e[l]=null,delete e[l]}},i=function(e){e.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(i)),s.install=i;t["a"]=s},"8d41":function(e,t,a){},a1ee:function(e,t,a){},cbfe:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return c}));var l=a("b775");function o(e){return Object(l["a"])({url:"/coupon/index",method:"get",params:e})}function s(e){return Object(l["a"])({url:"/coupon/edit",method:"get",params:e})}function i(e){return Object(l["a"])({url:"/coupon/save",method:"post",data:e})}function n(e){return Object(l["a"])({url:"/coupon/detail",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/coupon/change_status",method:"post",data:e})}}}]);